<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Indoor Positioning Heatmap For Supermarket</title>
  <link href="{{ url_for('static', filename='output.css') }}" rel="stylesheet">
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: sans-serif;
    }

    #heatmapContainer {
      width: 100%;
      height: 100vh;
    }
  </style>
</head>
<body class="bg-gray-100">

  <div class="flex p-6 space-x-6 items-start">
    <!-- Left Panel -->
    <div class="flex flex-col space-y-4 w-1/5">
      <h1 class="text-3xl font-extrabold text-gray-800 leading-tight">
        Indoor<br>Positioning<br>Heatmap For<br>Supermarket
      </h1>
      <div class="flex gap-2 items-center">
        <label for="modeSelector" class="text-md text-gray-700 font-medium">Select Source:</label>
        <select id="modeSelector" class="p-2 rounded-md border border-gray-300 focus:ring-2 focus:ring-blue-400 focus:outline-none">
          <option value="wifi" selected>WiFi</option>
        </select>
      </div>
    </div>

    <!-- Right Panel: Heatmap -->
    <div id="heatmapContainer" class="flex-grow rounded-lg overflow-hidden shadow-md"></div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const container = document.getElementById("heatmapContainer");

      function loadPlotlyHeatmap() {
        fetch("/plotly-heatmap")
          .then(response => response.text())
          .then(html => {
            const iframe = document.createElement("iframe");
            iframe.style.border = "none";
            iframe.style.width = "100%";
            iframe.style.height = "80vh";
            iframe.srcdoc = html;
            container.innerHTML = "";
            container.appendChild(iframe);
          })
          .catch(err => {
            container.innerText = "Failed to load heatmap.";
            console.error(err);
          });
      }

      loadPlotlyHeatmap();
    });
  </script>

</body>
</html>
